{"url":"https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/69707e5.js","id":"820cc55464847f96249720a5ec823a36730c67d8","source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1013:function(e,t,n){},1014:function(e,t,n){},1015:function(e,t,n){},1016:function(e,t,n){},1041:function(e,t,n){\"use strict\";n(953)},1065:function(e,t,n){\"use strict\";var o=n(6),r=n(9),c=n(70),l=n(19),f=Object(r.d)({props:{userId:{type:String,default:\"\"},type:{type:String,default:\"default\"},teaType:{type:String,default:\"\"}},setup:function(e){var t=Object(o.w)(),n=Object(r.a)((function(){return Object(l.h)(t.currentRoute.fullPath)}));return{handleLinkJump:function(){var o;o=e.teaType,Object(c.e)(\"private_msg_page_show\",{visit_source:o});var path=\"/notification/im?participantId=\".concat(e.userId);n.value?window.location.href=path:t.push(path)}}}}),d=(n(1111),n(29)),component=Object(d.a)(f,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"a\",{staticClass:\"im-button\",class:{\"has-icon\":\"hasIcon\"===e.type},attrs:{href:\"/notification/im?participantId=\"+e.userId},on:{click:function(t){return t.preventDefault(),e.handleLinkJump(t)}}},[\"hasIcon\"===e.type?o(\"img\",{staticClass:\"im-icon\",attrs:{src:n(1110),alt:\"私信\"}}):e._e(),e._v(\" \"),o(\"div\",[e._v(\"私信\")])])}),[],!1,null,\"71bb0cdc\",null);t.a=component.exports},1110:function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHLSURBVHgB7ZdbTsJAGIXPT9AXE8KjiRe6A3EH7EB2IK5AdsDPDlwC7ABXIEvAFdh4SXxsfNToeGqBTLFQCmOKyXxJ05lpO/P1NO1MAY/H4wRZbDhUE+wDXR44Qwl8AeEH0H9VCe32lOhU8o7FAOUSvgHnkUo0a6jYR/eAFsqXjAlqBh27ISUquyGZIKjb1Qr+CV7UNV7UNZWFyo0BrlicoCQ4/phvfDd2sdtl2QWBmiZniS6LF9zq+FviD/uQ442eVcZZJ0heDxSufwJtnnjNahMOidMTwahiMAytWSiLlOgRU6RUtDjPznCUcm56dYZzwOFeVCaZoqdqlLse73QUd/akMkK2cOGU10nvWE2LffYkmcr7jyo6O1bNuoAntrlrUzzkfvBOaTvl6UCDeMtJea30askNd7HiKVWxmoCbckWlJ2oyUw6Tx9OZpczyJd/YyAjGBdLLJU90TpGUl/WxbnpbiVoEyEl5kaLpZbGJ6JxVKW+THlyLWgSYptxQMzaJmNNvrivROWaLx7sKv3pyjRd1jRd1jRd1TVrUIMKuIHiwq+mfO/lZ+YQon5BLxFu74dc/E9eVARe6yqmwgRKg0D3T07x/KI/HsyHfQKq0yUCbcHQAAAAASUVORK5CYII=\"},1111:function(e,t,n){\"use strict\";n(1013)},1112:function(e,t,n){\"use strict\";n(1014)},1113:function(e,t,n){\"use strict\";n(1015)},1114:function(e,t,n){\"use strict\";n(1016)},866:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return o})),n.d(t,\"b\",(function(){return r})),n.d(t,\"c\",(function(){return l}));var o,r,c=n(70);function l(e,t){Object(c.e)(e,t)}!function(e){e.FollowShow=\"follow_show\",e.FollowClick=\"follow_click\",e.FollowCancel=\"follow_cancel\",e.FollowingFeedShow=\"following_feed_show\"}(o||(o={})),function(e){e[e.followCommendCard=0]=\"followCommendCard\",e[e.hotAuthors=1]=\"hotAuthors\",e[e.homeUserPopover=2]=\"homeUserPopover\",e[e.postUserCard=4]=\"postUserCard\",e[e.postTop=5]=\"postTop\",e[e.postStickyBar=6]=\"postStickyBar\",e[e.userCenterTop=7]=\"userCenterTop\",e[e.userCenterStickyBar=8]=\"userCenterStickyBar\",e[e.userCenterMomentFeed=9]=\"userCenterMomentFeed\",e[e.userCenterFollowing=10]=\"userCenterFollowing\",e[e.userCenterTeam=11]=\"userCenterTeam\",e[e.userCenterFollowers=12]=\"userCenterFollowers\",e[e.commentUserPopover=13]=\"commentUserPopover\",e[e.pinFeedUserPopover=14]=\"pinFeedUserPopover\",e[e.pinDiggDetail=15]=\"pinDiggDetail\",e[e.pinDetail=16]=\"pinDetail\",e[e.clubDetail=18]=\"clubDetail\",e[e.searchResult=19]=\"searchResult\",e[e.teamCenterTop=20]=\"teamCenterTop\",e[e.other=100]=\"other\"}(r||(r={}))},873:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return l}));n(7);var o=n(12),r=n(13),c=function(){function e(){Object(o.a)(this,e),this.busy=!1}return Object(r.a)(e,[{key:\"do\",value:function(e){var t=this;return this.busy?Promise.resolve():(this.busy=!0,Promise.resolve(\"function\"==typeof e?e():e).then((function(e){return t.busy=!1,e})).catch((function(e){return t.busy=!1,Promise.reject(e)})))}}]),e}();function l(){return new c}},875:function(e,t,n){\"use strict\";n.r(t);n(7),n(80);var o=n(6),r=n(9),c=n(30),l=n(306),f=n(1065),d=n(963),v=Object(r.d)({components:{Triangle:d.a},props:{disalbe:{type:Boolean,default:!1},promise:Promise},emits:[\"afterShow\"],setup:function(e,t){var data=Object(r.q)({visible:!1,top:0,left:0,isTop:!1}),n=Object(r.r)(null),o=Object(r.r)(null),c=Object(r.r)();return{data:data,popoverStyle:Object(r.a)((function(){return{top:\"\".concat(data.top,\"px\"),left:\"\".concat(data.left,\"px\")}})),contentElem:c,showPopover:function(r){e.disalbe||(clearTimeout(o.value),t.emit(\"show\"),n.value=setTimeout((function(){Promise.resolve(e.promise).then((function(){n.value&&(data.visible=!0,t.root.$nextTick((function(){var e=r.target,n=null==e?void 0:e.getBoundingClientRect(),o=e.offsetWidth||33,l=e.offsetHeight||33,f=c.value,d=(null==f?void 0:f.offsetWidth)||260,v=(null==f?void 0:f.offsetHeight)||160,m=n.left-d/2+o/2,w=n.top-v-12;data.isTop=!1,w<60&&(data.isTop=!0,w=n.top+l+8),m=Math.max(0,m),data.left=m,data.top=w,t.emit(\"afterShow\")})))}))}),300))},hidePopover:function(){clearTimeout(n.value),n.value=null,t.emit(\"hide\"),o.value=setTimeout((function(){o.value=null,data.visible=!1}),300)}}}}),m=(n(1112),n(29)),w=Object(m.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"popover-box\",on:{mouseenter:function(t){return e.showPopover(t)},mouseleave:e.hidePopover}},[n(\"transition\",{attrs:{name:\"fade\"}},[e.data.visible?n(\"div\",{ref:\"contentElem\",staticClass:\"popover-content\",style:e.popoverStyle},[e._t(\"content\"),e._v(\" \"),n(\"triangle\",{staticClass:\"triangle-bottom\",class:{isTop:e.data.isTop}})],2):e._e()]),e._v(\" \"),e._t(\"default\")],2)}),[],!1,null,\"23e711a0\",null).exports,h=n(22),y=n(880),_=n(866),O=n(308),x=n(882),A=Object(r.d)({components:{Avatar:l.a,Popover:w,Button:y.a,ImButton:f.a},props:{userId:String,showJscoreLevel:{type:Boolean,default:!1},enablePopover:{type:Boolean,default:!0},teaFollowType:{type:Number,default:_.b.other}},setup:function(e){var t=Object(o.x)(),n=Object(r.a)((function(){return t.getters.USER})),l=Object(r.r)(null),f=Object(r.r)(),d=Object(r.a)((function(){return n.value&&n.value.id===e.userId})),v=Object(x.a)({itemId:e.userId,itemType:h.e.UserType,teaFollowType:e.teaFollowType}),m=v.isFollow,w=v.followLoading,y=v.toggleFollow,A=v.setFollowInfo;return Object(r.x)(l,(function(){l.value&&A({itemId:l.value.id,itemType:h.e.UserType,isFollow:l.value.followed})})),{isFollow:m,fetchUserPromise:f,user:l,self:d,followLoading:w,toggleFollow:y,toFollowing:function(){window.open(\"/user/\".concat(e.userId,\"/following\"),\"_blank\")},toFollower:function(){window.open(\"/user/\".concat(e.userId,\"/followers\"),\"_blank\")},handleShow:function(){e.userId&&(f.value=Object(c.i)(e.userId,{ignore404:!0}).then((function(e){if(e.is_logout)return Promise.reject();l.value=e})))},handleAfterShow:function(){Object(_.c)(_.a.FollowShow,{current_page:Object(O.e)(window.location.href),follow_type:e.teaFollowType})}}},computed:{position:function(){return this.user&&(this.$userPosition(this.user)||this.user.description||\"暂无简介\")}}}),T=(n(1113),n(1114),Object(m.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Popover\",{staticClass:\"user-popover\",attrs:{promise:e.fetchUserPromise},on:{show:e.handleShow,afterShow:e.handleAfterShow},scopedSlots:e._u([{key:\"content\",fn:function(){return[n(\"div\",{staticClass:\"info-row\",on:{click:function(e){e.stopPropagation()}}},[n(\"app-link\",{attrs:{to:e.$userRoute(e.user),blank:!0}},[n(\"avatar\",{staticClass:\"avatar\",attrs:{user:e.user,decorative:!0,alt:e.user.username+\"的头像\"}})],1),e._v(\" \"),n(\"div\",{staticClass:\"user-info\"},[n(\"username\",{attrs:{user:e.user,\"show-jscore-level\":e.showJscoreLevel}}),e._v(\" \"),n(\"div\",{staticClass:\"position\"},[e._v(e._s(e.position))])],1)],1),e._v(\" \"),e.self?e._e():n(\"div\",{staticClass:\"operate-btn\"},[n(\"Button\",{staticClass:\"follow-btn\",attrs:{\"st:name\":\"followBtn\",attention:!0,\"custom-attention-text\":\"关注\",\"cancel-attention-text\":\"已关注\",cancel:e.isFollow,loading:e.followLoading,size:\"large\",\"show-icon\":!1},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleFollow()}}}),e._v(\" \"),n(\"ImButton\",{staticClass:\"im-btn\",attrs:{\"tea-type\":\"personal_information_card\",\"user-id\":e.userId}})],1),e._v(\" \"),n(\"div\",{staticClass:\"meta-row\",on:{click:function(e){e.stopPropagation()}}},[n(\"ul\",{staticClass:\"meta-list\"},[n(\"li\",{staticClass:\"item\",on:{click:e.toFollowing}},[n(\"div\",{staticClass:\"count\"},[e._v(e._s(e.user.followingCount||0))]),e._v(\" \"),n(\"div\",{staticClass:\"title\"},[e._v(\"关注\")])]),e._v(\" \"),n(\"li\",{staticClass:\"divider\"}),e._v(\" \"),n(\"li\",{staticClass:\"item\",on:{click:e.toFollower}},[n(\"div\",{staticClass:\"count\"},[e._v(e._s(e.user.followerCount||0))]),e._v(\" \"),n(\"div\",{staticClass:\"title\"},[e._v(\"粉丝\")])])])])]},proxy:!0}])},[e._v(\" \"),e._t(\"default\")],2)}),[],!1,null,\"958452bc\",null));t.default=T.exports},880:function(e,t,n){\"use strict\";var o=n(9),r=n(909),c=n.n(r),l=n(910),f=n.n(l),d=n(911),v=n.n(d),m=n(912),w=n.n(m),h=n(913),y=n.n(h),_=Object(o.d)({props:{type:{type:String,default:\"primary\"},attention:Boolean,customAttentionText:String,cancelAttentionText:String,size:{type:String,default:\"medium\"},status:{type:String,default:\"default\"},disabled:Boolean,loading:Boolean,cancel:Boolean,text:String,icon:String,showIcon:{type:Boolean,default:!0}},setup:function(e,t){var n=Object(o.a)((function(){return e.attention}));return{handleClick:function(n){e.disabled||e.loading||t.emit(\"click\",n)},isAttentionType:n,attentionText:Object(o.a)((function(){return\"mini\"===e.size&&e.loading?\"\":e.cancel?e.loading?\"取消\":e.cancelAttentionText||\"已关注\":e.customAttentionText||\"关注\"})),iconSrc:Object(o.a)((function(){return e.loading?e.cancel||n.value&&\"primary\"!==e.type?w.a:y.a:n.value&&e.showIcon?\"mini\"===e.size?\"\":e.icon||e.cancel?v.a:\"primary\"===e.type?c.a:f.a:\"\"}))}}}),O=(n(914),n(29)),component=Object(O.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"button\",{staticClass:\"ui-btn\",class:[e.type,e.size,e.status,e.cancel?\"cancel\":\"\",e.attention?\"attention\":\"\"],attrs:{disabled:e.disabled||e.loading},on:{click:e.handleClick}},[e.iconSrc?n(\"img\",{staticClass:\"img\",class:e.loading?\"loading\":\"\",attrs:{src:e.iconSrc}}):e._e(),e._v(\" \"),e.isAttentionType?[e._v(e._s(e.attentionText))]:e._t(\"default\",[e._v(e._s(e.text))])],2)}),[],!1,null,\"e1243e7c\",null);t.a=component.exports},882:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return h}));n(41),n(47),n(24);var o=n(5),r=n(6),c=n(88),l=n(22),f=n(3),d=n(873),v=n(1),m=n(866),w=n(308);function h(e){var t,n,v,h=e.itemId,O=void 0===h?\"\":h,x=e.itemType,A=void 0===x?l.e.UserType:x,T=e.isFollow,C=void 0!==T&&T,j=e.teaFollowType,F=void 0===j?m.b.other:j,k=e.errorText,S=void 0===k?\"关注失败，请稍后重试~\":k,U=e.successText,I=void 0===U?\"\":U,R=Object(d.a)(),B=Object(r.x)(),P=Object(r.c)(),E=Object(r.n)(C),L=Object(r.n)(O),D=Object(r.n)(A),M=Object(r.n)(!1),J=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==P?void 0:P.proxy.$ensureAuthorized(\"login\");case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt(\"return\",!1);case 8:if(!t||\"string\"==typeof t){e.next=10;break}return e.abrupt(\"return\",!1);case 10:if((null!=t?t:L.value)&&(null!=n?n:D.value)){e.next=12;break}return e.abrupt(\"return\",!1);case 12:return e.abrupt(\"return\",!0);case 13:case\"end\":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o){var r,d,v,h,_,O,x,A,T,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt(\"return\",{isSuccess:!1});case 4:return h=null!=t?t:L.value,_=null!=n?n:D.value,O=null!==(r=null==o?void 0:o.successText)&&void 0!==r?r:I,x=null!==(d=null==o?void 0:o.errorText)&&void 0!==d?d:S,M.value=!0,A=!0,e.prev=10,e.next=13,y({itemId:h,itemType:_});case 13:0===(T=e.sent).err_no?(E.value=!0,O&&c.Message.success(O)):(A=!1,c.Message.error(T.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),A=!1,c.Message.error(x);case 21:return M.value=!1,[l.e.UserType,l.e.Team].includes(_)&&(C=null!==(v=null==o?void 0:o.teaFollowType)&&void 0!==v?v:F,Object(m.c)(m.a.FollowClick,{follow_status:A?1:0,current_page:Object(w.e)(window.location.href),follow_type:C,to_item_id:h,to_item_type:_===l.e.UserType?0:1})),_===l.e.UserType&&B.dispatch(f.FOLLOW_USER),e.abrupt(\"return\",{isSuccess:A,targetStatus:!0});case 25:case\"end\":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,o){return e.apply(this,arguments)}}(),W=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o){var r,d,v,h,y,O,x,A,T,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt(\"return\",{isSuccess:!1});case 4:return h=null!=t?t:L.value,y=null!=n?n:D.value,O=null!==(r=null==o?void 0:o.successText)&&void 0!==r?r:I,x=null!==(d=null==o?void 0:o.errorText)&&void 0!==d?d:S,M.value=!0,A=!0,e.prev=10,e.next=13,_({itemId:h,itemType:y});case 13:0===(T=e.sent).err_no?(E.value=!1,O&&c.Message.success(\"取消\".concat(O))):(A=!1,c.Message.error(T.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),A=!1,c.Message.error(\"取消\".concat(x));case 21:return M.value=!1,[l.e.UserType,l.e.Team].includes(y)&&(C=null!==(v=null==o?void 0:o.teaFollowType)&&void 0!==v?v:F,Object(m.c)(m.a.FollowCancel,{follow_status:A?1:0,current_page:Object(w.e)(window.location.href),follow_type:C,to_item_id:h,to_item_type:y===l.e.UserType?0:1})),y===l.e.UserType&&B.dispatch(f.UNFOLLOW_USER),e.abrupt(\"return\",{isSuccess:A,targetStatus:!1});case 25:case\"end\":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,o){return e.apply(this,arguments)}}(),K=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=o?o:E.value)){e.next=7;break}return e.next=4,W(t,n,r);case 4:return e.abrupt(\"return\",e.sent);case 7:return e.next=9,H(t,n,r);case 9:return e.abrupt(\"return\",e.sent);case 10:case\"end\":return e.stop()}}),e)})));return function(t,n,o,r){return e.apply(this,arguments)}}();return{isFollow:E,followLoading:M,doFollow:(v=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.do((function(){return H(t,n,o)}));case 2:return e.abrupt(\"return\",e.sent);case 3:case\"end\":return e.stop()}}),e)}))),function(e,t,n){return v.apply(this,arguments)}),cancelFollow:(n=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.do((function(){return W(t,n,o)}));case 2:return e.abrupt(\"return\",e.sent);case 3:case\"end\":return e.stop()}}),e)}))),function(e,t,o){return n.apply(this,arguments)}),toggleFollow:(t=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.do((function(){return K(t,n,o,r)}));case 2:return e.abrupt(\"return\",e.sent);case 3:case\"end\":return e.stop()}}),e)}))),function(e,n,o,r){return t.apply(this,arguments)}),setFollowInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFollow,n=e.itemId,o=e.itemType;\"boolean\"==typeof t&&(E.value=t),\"string\"==typeof n&&(L.value=n),void 0!==o&&(D.value=o)}}}function y(e){var t=e.itemId,n=e.itemType;return Object(v.e)({url:\"/interact_api/v1/follow/do\",method:\"post\",showError:!1,body:{id:t,type:n}})}function _(e){var t=e.itemId,n=e.itemType;return Object(v.e)({url:\"/interact_api/v1/follow/undo\",method:\"post\",showError:!1,body:{id:t,type:n}})}},884:function(e,t,n){},909:function(e,t,n){e.exports=n.p+\"c5c64e06a56896da43c1d084d2482cf3.svg\"},910:function(e,t,n){e.exports=n.p+\"bd960fe696b2c2b82cea3c0e2e2f2aae.svg\"},911:function(e,t,n){e.exports=n.p+\"062856d97fc330530a3a64c01d915edc.svg\"},912:function(e,t,n){e.exports=n.p+\"img/loading.b144729.png\"},913:function(e,t,n){e.exports=n.p+\"img/loading-light.e96acb8.png\"},914:function(e,t,n){\"use strict\";n(884)},953:function(e,t,n){},963:function(e,t,n){\"use strict\";n(1041);var o=n(29),component=Object(o.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t(\"span\",{staticClass:\"container\"},[t(\"em\",{staticClass:\"triangle\"})])}],!1,null,\"5ae2b6bc\",null);t.a=component.exports}}]);\n//# sourceMappingURL=69707e5.js.map"}